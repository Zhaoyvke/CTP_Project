#include "DealSpicalTime.h"



DealSpicalTime::DealSpicalTime()
{   
	//È«Æ·ÖÖ
    //ÌØÊâÊ±¼ä×éºÏ

	/*==================ºÍÂÝÎÆ¸ÖÏàÍ¬Ê±¼äµãµÄ==================*/
	map<string, string>  rb_Spical = { {"11:00", "11:30" },{"13:30", "14:30"},{"14:30", "15:00"} };
	map<string, string> rb_filter = { {"15:00:10","20:59:50"},{"23:00:10","23:59:50"},{"00:00:00","08:59:50"},{"11:30:10","13:29:50"} };
	vector<string> rb_close = { "11:30","15:00","23:00" };
	//ÂÝÎÆ¸Ö
	Spical_time.insert(make_pair("RB", rb_Spical));
	Dirty_time.insert(make_pair("RB", rb_filter));
	Close_time.insert(make_pair("RB", rb_close));
	//Ôþ¾í°å
	Spical_time.insert(make_pair("HC", rb_Spical));
	Dirty_time.insert(make_pair("HC", rb_filter));
	Close_time.insert(make_pair("HC", rb_close));
	//Á¤Çà
	Spical_time.insert(make_pair("BU", rb_Spical));
	Dirty_time.insert(make_pair("BU", rb_filter));
	Close_time.insert(make_pair("BU", rb_close));
	//Ïð½º
	Spical_time.insert(make_pair("RU", rb_Spical));
	Dirty_time.insert(make_pair("RU", rb_filter));
	Close_time.insert(make_pair("RU", rb_close));
	//Ö½½¬
	Spical_time.insert(make_pair("SP", rb_Spical));
	Dirty_time.insert(make_pair("SP", rb_filter));
	Close_time.insert(make_pair("SP", rb_close));
	
	//Ìú¿óÊ¯
	Spical_time.insert(make_pair("I", rb_Spical));
	Dirty_time.insert(make_pair("I", rb_filter));
	Close_time.insert(make_pair("I", rb_close));
	//½¹Ì¿
	Spical_time.insert(make_pair("J", rb_Spical));
	Dirty_time.insert(make_pair("J", rb_filter));
	Close_time.insert(make_pair("J", rb_close));
	//½¹Ãº
	Spical_time.insert(make_pair("JM", rb_Spical));
	Dirty_time.insert(make_pair("JM", rb_filter));
	Close_time.insert(make_pair("JM", rb_close));
	//¶¹ÆÉ
	Spical_time.insert(make_pair("M", rb_Spical));
	Dirty_time.insert(make_pair("M", rb_filter));
	Close_time.insert(make_pair("M", rb_close));
	//ÓñÃ×
	Spical_time.insert(make_pair("C", rb_Spical));
	Dirty_time.insert(make_pair("C", rb_filter));
	Close_time.insert(make_pair("C", rb_close));
	//ËÜÁÏ
	Spical_time.insert(make_pair("L", rb_Spical));
	Dirty_time.insert(make_pair("L", rb_filter));
	Close_time.insert(make_pair("L", rb_close));
	//¾ÛÂÈÒÒÏ©
	Spical_time.insert(make_pair("V", rb_Spical));
	Dirty_time.insert(make_pair("V", rb_filter));
	Close_time.insert(make_pair("V", rb_close));
	//¶¹ÓÍ
	Spical_time.insert(make_pair("Y", rb_Spical));
	Dirty_time.insert(make_pair("Y", rb_filter));
	Close_time.insert(make_pair("Y", rb_close));
	//»Æ´ó¶¹Ò»ºÅ
	Spical_time.insert(make_pair("A", rb_Spical));
	Dirty_time.insert(make_pair("A", rb_filter));
	Close_time.insert(make_pair("A", rb_close));
	//»Æ´ó¶¹¶þºÅ
	Spical_time.insert(make_pair("B", rb_Spical));
	Dirty_time.insert(make_pair("B", rb_filter));
	Close_time.insert(make_pair("B", rb_close));
	//¾Û±ûÏ©
	Spical_time.insert(make_pair("PP", rb_Spical));
	Dirty_time.insert(make_pair("PP", rb_filter));
	Close_time.insert(make_pair("PP", rb_close));
	//µí·Û
	Spical_time.insert(make_pair("CS", rb_Spical));
	Dirty_time.insert(make_pair("CS", rb_filter));
	Close_time.insert(make_pair("CS", rb_close));
	//Òº»¯Æø
	Spical_time.insert(make_pair("PG", rb_Spical));
	Dirty_time.insert(make_pair("PG", rb_filter));
	Close_time.insert(make_pair("PG", rb_close));
	//ÒÒ¶þ´¼
	Spical_time.insert(make_pair("EG", rb_Spical));
	Dirty_time.insert(make_pair("EG", rb_filter));
	Close_time.insert(make_pair("EG", rb_close));
	//È¼ÓÍ
	Spical_time.insert(make_pair("FU", rb_Spical));
	Dirty_time.insert(make_pair("FU", rb_filter));
	Close_time.insert(make_pair("FU", rb_close));
	//ÏËÎ¬°å
	Spical_time.insert(make_pair("FB", rb_Spical));
	Dirty_time.insert(make_pair("FB", rb_filter));
	Close_time.insert(make_pair("FB", rb_close));
	//¾¬Ã×
	Spical_time.insert(make_pair("RR", rb_Spical));
	Dirty_time.insert(make_pair("RR", rb_filter));
	Close_time.insert(make_pair("RR", rb_close));
	//½ººÏ°å
	Spical_time.insert(make_pair("BB", rb_Spical));
	Dirty_time.insert(make_pair("BB", rb_filter));
	Close_time.insert(make_pair("BB", rb_close));
	//¼¦µ°
	Spical_time.insert(make_pair("JD", rb_Spical));
	Dirty_time.insert(make_pair("JD", rb_filter));
	Close_time.insert(make_pair("JD", rb_close));
	//±½ÒÒÏ©
	Spical_time.insert(make_pair("EB", rb_Spical));
	Dirty_time.insert(make_pair("EB", rb_filter));
	Close_time.insert(make_pair("EB", rb_close));
	//µÍÁòÈ¼ÓÍ
	Spical_time.insert(make_pair("LU", rb_Spical));
	Dirty_time.insert(make_pair("LU", rb_filter));
	Close_time.insert(make_pair("LU", rb_close));
	//20ºÅ½º
	Spical_time.insert(make_pair("NR", rb_Spical));
	Dirty_time.insert(make_pair("NR", rb_filter));
	Close_time.insert(make_pair("NR", rb_close));
	//ÃÞ»¨
	Spical_time.insert(make_pair("CF", rb_Spical));
	Dirty_time.insert(make_pair("CF", rb_filter));
	Close_time.insert(make_pair("CF", rb_close));
	//ÃÞÉ´
	Spical_time.insert(make_pair("CY", rb_Spical));
	Dirty_time.insert(make_pair("CY", rb_filter));
	Close_time.insert(make_pair("CY", rb_close));
	//²£Á§
	Spical_time.insert(make_pair("FG", rb_Spical));
	Dirty_time.insert(make_pair("FG", rb_filter));
	Close_time.insert(make_pair("FG", rb_close));
	//°×ÌÇ
	Spical_time.insert(make_pair("SR", rb_Spical));
	Dirty_time.insert(make_pair("SR", rb_filter));
	Close_time.insert(make_pair("SR", rb_close));
	//PTA
	Spical_time.insert(make_pair("TA", rb_Spical));
	Dirty_time.insert(make_pair("TA", rb_filter));
	Close_time.insert(make_pair("TA", rb_close));
	//¼×´¼
	Spical_time.insert(make_pair("MA", rb_Spical));
	Dirty_time.insert(make_pair("MA", rb_filter));
	Close_time.insert(make_pair("MA", rb_close));
	//²ËÓÍ
	Spical_time.insert(make_pair("OI", rb_Spical));
	Dirty_time.insert(make_pair("OI", rb_filter));
	Close_time.insert(make_pair("OI", rb_close));
	//¶ÌÏË
	Spical_time.insert(make_pair("PF", rb_Spical));
	Dirty_time.insert(make_pair("PF", rb_filter));
	Close_time.insert(make_pair("PF", rb_close));
	//²ËÆÉ
	Spical_time.insert(make_pair("RM", rb_Spical));
	Dirty_time.insert(make_pair("RM", rb_filter));
	Close_time.insert(make_pair("RM", rb_close));
	//´¿¼î
	Spical_time.insert(make_pair("SA", rb_Spical));
	Dirty_time.insert(make_pair("SA", rb_filter));
	Close_time.insert(make_pair("SA", rb_close));
	//¶¯Á¦Ãº
	Spical_time.insert(make_pair("ZC", rb_Spical));
	Dirty_time.insert(make_pair("ZC", rb_filter));
	Close_time.insert(make_pair("ZC", rb_close));
	//×Øéµ
	Spical_time.insert(make_pair("P", rb_Spical));
	Dirty_time.insert(make_pair("P", rb_filter));
	Close_time.insert(make_pair("P", rb_close));
	
	/*==================ºÍÍ­ÏàÍ¬Ê±¼äµãµÄ==================*/
	map<string, string>  cu_Spical = { {"11:00", "11:30" },{"13:30", "14:30"},{"14:30", "15:00"} };
	map<string, string> cu_filter = { { "15:00:10","20:59:50" },{ "01:00:10","08:59:50" },{ "11:30:10","13:29:50"} };
	vector<string> cu_close = { "11:30","15:00","01:00" };
	//Í­
	Spical_time.insert(make_pair("CU", cu_Spical));
	Dirty_time.insert(make_pair("CU", cu_filter));
	Close_time.insert(make_pair("CU", cu_close));
	//¹ú¼ÊÍ­
	Spical_time.insert(make_pair("BC", cu_Spical));
	Dirty_time.insert(make_pair("BC", cu_filter));
	Close_time.insert(make_pair("BC", cu_close));
	//ÂÁ
	Spical_time.insert(make_pair("AL", cu_Spical));
	Dirty_time.insert(make_pair("AL", cu_filter));
	Close_time.insert(make_pair("AL", cu_close));
	//Îý
	Spical_time.insert(make_pair("SN", cu_Spical));
	Dirty_time.insert(make_pair("SN", cu_filter));
	Close_time.insert(make_pair("SN", cu_close));
	//Äø
	Spical_time.insert(make_pair("NI", cu_Spical));
	Dirty_time.insert(make_pair("NI", cu_filter));
	Close_time.insert(make_pair("NI", cu_close));
	//Ç¦
	Spical_time.insert(make_pair("PB", cu_Spical));
	Dirty_time.insert(make_pair("PB", cu_filter));
	Close_time.insert(make_pair("PB", cu_close));
	//Ð¿
	Spical_time.insert(make_pair("ZN", cu_Spical));
	Dirty_time.insert(make_pair("ZN", cu_filter));
	Close_time.insert(make_pair("ZN", cu_close));
	//²»Ðâ¸Ö
	Spical_time.insert(make_pair("SS", cu_Spical));
	Dirty_time.insert(make_pair("SS", cu_filter));
	Close_time.insert(make_pair("SS", cu_close));

	
	/*==================ºÍÆ»¹ûÏàÍ¬Ê±¼äµãµÄ==================*/
	map<string, string>  ap_Spical = { { "11:00", "10:30" },{"13:30", "14:30"},{"14:30", "15:00"} };
	map<string, string> ap_filter = { { "15:00:10","23:59:50" },{ "00.00.00","08:59:50" },{ "11:30:10","13:29:50" } };
	vector<string> ap_close = { "11:30","15:00" };

	//Æ»¹û
	Spical_time.insert(make_pair("AP", ap_Spical));
	Dirty_time.insert(make_pair("AP", ap_filter));
	Close_time.insert(make_pair("AP", ap_close));
	//Ïß²Ä
	Spical_time.insert(make_pair("WR", ap_Spical));
	Dirty_time.insert(make_pair("WR", ap_filter));
	Close_time.insert(make_pair("WR", ap_close));
	//ºìÔæ
	Spical_time.insert(make_pair("CJ", ap_Spical));
	Dirty_time.insert(make_pair("CJ", ap_filter));
	Close_time.insert(make_pair("CJ", ap_close));
	//¾¬µ¾
	Spical_time.insert(make_pair("JR", ap_Spical));
	Dirty_time.insert(make_pair("JR", ap_filter));
	Close_time.insert(make_pair("JR", ap_close));
	//ÍíôÌµ¾
	Spical_time.insert(make_pair("LR", ap_Spical));
	Dirty_time.insert(make_pair("LR", ap_filter));
	Close_time.insert(make_pair("LR", ap_close));
	//ÔçôÌµ¾
	Spical_time.insert(make_pair("RI", ap_Spical));
	Dirty_time.insert(make_pair("RI", ap_filter));
	Close_time.insert(make_pair("RI", ap_close));
	//ÆÕÂó
	Spical_time.insert(make_pair("PM", ap_Spical));
	Dirty_time.insert(make_pair("PM", ap_filter));
	Close_time.insert(make_pair("PM", ap_close));
	//²Ë×Ñ
	Spical_time.insert(make_pair("RS", ap_Spical));
	Dirty_time.insert(make_pair("RS", ap_filter));
	Close_time.insert(make_pair("RS", ap_close));
	//¹èÌú
	Spical_time.insert(make_pair("SF", ap_Spical));
	Dirty_time.insert(make_pair("SF", ap_filter));
	Close_time.insert(make_pair("SF", ap_close));
	//ÃÌ¹è
	Spical_time.insert(make_pair("SM", ap_Spical));
	Dirty_time.insert(make_pair("SM", ap_filter));
	Close_time.insert(make_pair("SM", ap_close));
	//²ËÆÉ
	Spical_time.insert(make_pair("RM", ap_Spical));
	Dirty_time.insert(make_pair("RM", ap_filter));
	Close_time.insert(make_pair("RM", ap_close));
	//ÄòËØ
	Spical_time.insert(make_pair("UR", ap_Spical));
	Dirty_time.insert(make_pair("UR", ap_filter));
	Close_time.insert(make_pair("UR", ap_close));
	//Ç¿Âó
	Spical_time.insert(make_pair("WH", ap_Spical));
	Dirty_time.insert(make_pair("WH", ap_filter));
	Close_time.insert(make_pair("WH", ap_close));
	//ÉúÖí
	Spical_time.insert(make_pair("LH", ap_Spical));
	Dirty_time.insert(make_pair("LH", ap_filter));
	Close_time.insert(make_pair("LH", ap_close));
	//»¨Éú
	Spical_time.insert(make_pair("PK", ap_Spical));
	Dirty_time.insert(make_pair("PK", ap_filter));
	Close_time.insert(make_pair("PK", ap_close));
	/*==================ºÍifÏàÍ¬Ê±¼äµãµÄ==================*/
	map<string, string>  if_Spical = { { "09:30", "10:30" },{ "10:30", "11:30" } };
	map<string, string> if_filter = { { "15:00:10","23:59:50" },{ "00.00.00","09:29:50" },{ "11:30:10","12:59:50" } };
	vector<string> if_close = { "11:30","15:00" };
	//»¦Éî300¹ÉÖ¸ÆÚ»õ
	Spical_time.insert(make_pair("IF", if_Spical));
	Dirty_time.insert(make_pair("IF", if_filter));
	Close_time.insert(make_pair("IF", if_close));
	//ÖÐÖ¤500¹ÉÖ¸ÆÚ»õ
	Spical_time.insert(make_pair("IC", if_Spical));
	Dirty_time.insert(make_pair("IC", if_filter));
	Close_time.insert(make_pair("IC", if_close));
	//ÉÏÖ¤50¹ÉÖ¸ÆÚ»õ
	Spical_time.insert(make_pair("IH", if_Spical));
	Dirty_time.insert(make_pair("IH", if_filter));
	Close_time.insert(make_pair("IH", if_close));

	/*==================ºÍ¹úÕ®ÆÚ»õÏàÍ¬Ê±¼äµãµÄ==================*/
	map<string, string>  t_Spical = { { "09:15", "10:30" },{ "10:30", "11:30" } };
	map<string, string> t_filter = { { "15:15:10","23:59:50" },{ "00.00.00","09:14:50" },{ "11:30:10","12:59:50" } };
	vector<string> t_close = { "11:30","15:15" };
	//2ÄêÆÚ¹úÕ®ÆÚ»õ
	Spical_time.insert(make_pair("TS", t_Spical));
	Dirty_time.insert(make_pair("TS", t_filter));
	Close_time.insert(make_pair("TS", t_close));
	//5ÄêÆÚ¹úÕ®ÆÚ»õ
	Spical_time.insert(make_pair("TF", t_Spical));
	Dirty_time.insert(make_pair("TF", t_filter));
	Close_time.insert(make_pair("TF", t_close));
	//10ÄêÆÚ¹úÕ®ÆÚ»õ
	Spical_time.insert(make_pair("T", t_Spical));
	Dirty_time.insert(make_pair("T", t_filter));
	Close_time.insert(make_pair("T", t_close));
	
	/*==================ºÍÔ­ÓÍÏàÍ¬Ê±¼äµãµÄ==================*/

	map<string, string>  sc_Spical = { { "11:00", "11:30" },{ "13:30", "14:30" },{ "14:30", "15:00" },{ "02:00", "02:30" } };
	map<string, string> sc_filtrer = { { "15:00:10","20:59:50" },{ "02:30:10","08:59:50" },{ "11:30:10","13:29:50" } };
	vector<string> sc_close = { "11:30","15:00","02:30" };
	//Ô­ÓÍ
	Spical_time.insert(make_pair("SC", sc_Spical));
	Dirty_time.insert(make_pair("SC", sc_filtrer));
	Close_time.insert(make_pair("SC", sc_close));
	//»Æ½ð
	Spical_time.insert(make_pair("AU", sc_Spical));
	Dirty_time.insert(make_pair("AU", sc_filtrer));
	Close_time.insert(make_pair("AU", sc_close));
	//°×Òø
	Spical_time.insert(make_pair("AG", sc_Spical));
	Dirty_time.insert(make_pair("AG", sc_filtrer));
	Close_time.insert(make_pair("AG", sc_close));
	
	
}


bool DealSpicalTime::FindisinDirty(string pre, string time)
{
	if (Dirty_time.find(pre) == Dirty_time.end())
	{
		return true;
	}
	else
	{
		map<string,string>::iterator  m_iter = Dirty_time.find(pre)->second.begin();
		for (m_iter; m_iter != Dirty_time.find(pre)->second.end(); m_iter++)
		{
			if (m_iter->first < time && time < m_iter->second)
			{
				return true;
			}
		}
		return false;
	}
	return true;
}

bool DealSpicalTime::FindisinSpical(string pre, string time, string &Spicaltime)
{
	if (Spical_time.find(pre) == Spical_time.end())
	{
		return true;
	}
	else
	{
		map<string, string>::iterator  m_iter = Spical_time.find(pre)->second.begin();
		for (m_iter; m_iter != Spical_time.find(pre)->second.end(); m_iter++)
		{
			if (m_iter->first < time && time < m_iter->second)
			{
				Spicaltime = m_iter->second;
				return true;
			}
		}
		return false;
	}
	return true;
}

bool DealSpicalTime::FindisinClose(string pre, string time, string &Closetime)
{
	if (Close_time.find(pre) == Close_time.end())
	{
		return true;
	}
	else
	{
		vector<string>::iterator iter = (Close_time.find(pre)->second).begin();
		for (iter; iter != (Close_time.find(pre)->second).end(); iter++)
		{
			if (time == (*iter))
			{
				Closetime = (*iter);
				return true;
			}
		}
		Closetime = "";
		return false;
	}

}

bool DealSpicalTime::JudgeLocatimeAndupdateTimeisEqual(char * updateTime)
{
	
		SYSTEMTIME LocalTlime;
		GetLocalTime(&LocalTlime);
		char local[512];
		sprintf(local, "%02d:%02d", LocalTlime.wHour, LocalTlime.wMinute);
		if (strcmp(local, updateTime) == 0)
			return true;
		else
			return false;
	

}

DealSpicalTime::~DealSpicalTime()
{
}
